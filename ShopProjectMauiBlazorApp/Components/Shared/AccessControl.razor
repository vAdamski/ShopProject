@using ShopProjectMauiBlazorApp.Auth0
@inject AuthenticationStateProvider AuthenticationStateProvider

<AuthorizeView>
    <Authorized>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="#" Match="NavLinkMatch.All">
                <span aria-hidden="true" class="bi bi-person"></span> Hi, @context.User.Identity?.Name!
            </NavLink>
        </div>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All" @onclick="Logout">
                <span class="bi bi-box-arrow-in-left" aria-hidden="true"></span> Log out
            </NavLink>
        </div>
    </Authorized>
    <NotAuthorized>
        <div class="nav-item px-3">
            <NavLink class="nav-link" href="" Match="NavLinkMatch.All" @onclick="Login">
                <span class="bi bi-box-arrow-in-right" aria-hidden="true"></span> Log in
            </NavLink>
        </div>
    </NotAuthorized>
</AuthorizeView>

@code{

    public async Task Login()
    {
        await ((Auth0AuthenticationStateProvider)AuthenticationStateProvider)
            .LogInAsync();
    }

    public void Logout()
    {
        ((Auth0AuthenticationStateProvider)AuthenticationStateProvider)
            .LogOut();
    }

}